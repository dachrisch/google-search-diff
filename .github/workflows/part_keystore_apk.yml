name: Keystore retriever from apk-environment

on:
  workflow_call:
    outputs:
      keystore:
        description: The keystore to use
        value: ${{ jobs.apk-keystore.outputs.keystore }}
      password:
        description: Keystore password
        value: ${{ jobs.apk-keystore.outputs.password }}

jobs:
  apk-keystore:
    runs-on: ubuntu-latest
    environment: apk-release
    outputs:
      keystore: ${{ steps.env.outputs.keystore }}
      password: ${{ steps.env.outputs.password }}
    steps:
      - name: 🔐 Get Values from environment
        id: env
        env:
          BASE64_KEYSTORE: ${{ secrets.BASE64_KEYSTORE }}
        run: |
          echo "keystore=$BASE64_KEYSTORE" >> $GITHUB_OUTPUT
          echo "password=$KEYSTORE_PASSWORD" >> $GITHUB_OUTPUT
